\newcounter{english}
\input{../article_base.tex}
\title{Solution to Final Exercise --- Model Theory (1), 80616}

\DeclareMathOperator{\age}{Age}

\begin{document}
\maketitle
\maketitleprint[yellow]

\question{}
Urysohn Space.
Let $L = \{ D_q \mid q \in \QQ_{\ge 0} \}$ such that $D_q$ is a binary relation symbol for any $q$.
For any metric space $(X, d)$ we can define $L$-structure $\Xx$ with $|\Xx| = X$ and $(x, y) \in D_q^\Xx \iff d(x, y) = q$.

\subquestion{}
Let $\Kk$ be the class of all finite metric spaces with rational distances. \\
We will show that $\Kk$ is a Fraïssé class.
\begin{proof}
	We will follow the definition of Fraïssé class.

	\textbf{Closure under isomorphism}\quad
	If $\Xx \in \Kk$ and $\Yy \cong \Xx$ and notate $(X, d), (Y, \rho)$ the equivalent metric spaces, then $f : \Xx \to \Yy$ that witness the isomorphism fulfills,
	\[
		d(x_1, x_2) = q
		\iff D_q^\Xx(x_1, x_2)
		\iff D_q^\Yy(f(x_1), f(x_2))
		\iff \rho(f(x_1), f(x_2)) = q
	.\]
	Meaning that $(Y, \rho)$ is a finite metric space with rational distance and therefore $\Yy \in \Kk$ as well.

	\textbf{Essential countability}\quad
	Let $X_n = [n]$ and $d : X_n^2 \to \QQ$ be a metric, define $\Xx_n^d$ as the equivalent of the metric space $(X_n, d)$.
	We define the collection,
	\[
		\Mm
		= \{ \Xx_n^d \mid n < \omega, d \text{ is a metric} \}
	.\]
	and notice that for each $n < \omega$, the collection of metric functions defined on $X_n$ is countable as it is a subset of $\QQ^{n^2}$.
	It follows that $\Mm$ is a countable collection, and notice that $\Mm \subseteq \Kk$. \\
	Let $\Yy \in \Kk$, and let $(Y, \rho)$ be the equivalent metric space, notate $n = |Y|$ and let us define $f : [n] \to Y$ a bijection, then,
	\[
		d : X_n^2 \to \QQ,
		\qquad
		d(x_1, x_2)
		= \rho(f(x_1), f(x_2))
	.\]
	is a metric on $X_n$ and therefore $\Xx_n^d \in \Mm$ and $\Xx_n^d \cong \Yy$.

	\textbf{Hereditary property}\quad
	Assume that $\Xx \subseteq \Yy \in \Kk$ and show that $\Xx \in \Kk$, we omit the requirement that $\Xx$ is finitely-generated as there are no function symbols and $|Y| < \omega$.
	Metric property is closed under restrictions then if $(Y, \rho)$ a metric space and $X \subseteq Y$ then $(X, \rho \restriction X^2)$ is a metric space as well.

	\textbf{The joint embedding property}\quad
	Suppose that $\Xx, \Yy \in \Kk$ and let $(X, d), (Y, \rho)$ be their respective equivalencies.
	Assume that $X \cap Y \ne \emptyset$ then let $x_0 \in X \cap Y$ be some element, and let $C = A \cup B$, define,
	\[
		f : C^2 \to \QQ_{\ge 0},
		\qquad
		f(a, b)
		= \begin{cases}
			d(a, b) & a, b \in X \\
			\rho(a, b) & a, b \in Y \\
			d(a, x_0) + \rho(b, x_0) & a \in X, b \in Y \\
			d(b, x_0) + \rho(a, x_0) & b \in X, a \in Y \\
		\end{cases}
	.\]
	Then $(C, f)$ is a metric space and it follows that $\id_X, \id_Y$ are embeddings of $X, Y$ into $C$ respectively. \\
	If $X \cap Y = \emptyset$ then denote some arbitrary elements $x_0 \in X, y_0 \in Y$,
	let $f : C^2 \to \QQ_{\ge 0}$ defined by,
	\[
		f(a, b)
		= \begin{cases}
			d(a, b) & a, b \in X \\
			\rho(a, b) & a, b \in Y \\
			d(x_0, a) + \rho(y_0, b) + 1 & a \in X, b \in Y \\
			d(x_0, b) + \rho(y_0, a) + 1 & \text{otherwise}
		\end{cases}
	.\]
	Thus $f$ is a metric over $C$, as it is symmetric, non-negative and fulfills triangle inequality.
	If $\Cc$ is the structure of $(C, f)$ then $\Cc \in \Kk$ and $\id_X, \id_Y$ are embedding of $\Xx, \Yy$ into $\Cc$.

	\textbf{The amalgamation property}\quad
	Let $\Xx, \Yy, \Zz \in \Kk$ with $(X, d_x), (Y, d_y), (Z, d_z)$ such that $g_x : \Zz \to \Xx, g_y : \Zz \to \Yy$ are embeddings.
	Let $\Cc \in \Kk$ as in the last statement, and assume without loss of generality that $\Cc \subseteq \Xx, \Yy$ (otherwise we can use closure under isomorphism) and therefore $g_x, g_y$ are both identity.
	Let $f_x : \Xx \to \Cc, f_y : \Yy \to \Cc$ be embeddings, it is implied that,
	\[
		f_y \circ g_y
		= f_y \circ \id_Z
		= f_x \circ \id_Z
		= f_x \circ g_x
	.\]
	and the property holds as wished.
\end{proof}
Let us denote $\UU_\QQ$ the Fraïssé limit of $\Kk$, and let $(U_\QQ, d)$ be its equivalent metric space.

\subquestion{}
Let $(X, d)$ be a metric space, a Katětov map is a function $f : X \to \RR_{\ge 0}$ such that,
\[
	\forall x, y \in X,\ 
	|f(x) - f(y)| \le d(x, y) \le f(x) + f(y)
.\]
A rational Katětov map is a Katětov map such that $\im f \subseteq \QQ$. \\
We will show that for every finite $A \subseteq U_\QQ$, any rational Katětov map $f : A \to \QQ_{\ge 0}$ is realized, namely there is some $b \in U_\QQ$ such that $\forall x \in U_\QQ,\ f(x) = d(x, b)$.
\begin{proof}
	Note that if $\Xx \cong \Yy$ and $f : \Xx \to \Yy$ isomorphism, then $R_q(x, y) \iff R_q(f(x), f(y))$, meaning that $f$ is an isometry of $X, Y$ as metric spaces.

	Let $f$ be some rational Katětov map of $A$.
	Let $B = A \uplus \{ c \}$ for some element, we define a metric on $B$, $\rho : B^2 \to \QQ_{\ge 0}$ by,
	\[
		\rho(x, y)
		= \begin{cases}
			d(x, y) & x, y \in A \\
			d(c, x) = f(x) & x \in A \\
			d(c, c) = 0
		\end{cases}
	.\]
	$\rho$ is symmetrical and non-negative, and fulfills the triangle inequality for elements of $A$, let us verify that for $c$ as well,
	\[
		\rho(c, c)
		= 0
		\le 2 f(x)
		= \rho(c, x) + \rho(x, c)
	.\]
	and,
	\[
		\rho(x, y)
		= d(x, y)
		\le f(x) + f(y)
		= \rho(x, c) + \rho(c, y)
	.\]
	Then $(B, \rho)$ is indeed metric space, but $B$ is finite and thus $\Bb$ is isomorphic to some substructure of $\UU_\QQ$, $\Bb \cong \Cc \in \Kk$, and let $g : \Bb \leftrightarrow \Cc$ be the isomorphism.
	$\UU_\QQ$ is ultra-homogeneous then the isomorphism of $A \to \Cc \setminus \{ g(c) \}$ can be extended to $\sigma \in \aut(\UU_\QQ)$, and let $e = \sigma^{-1}(c')$.
	For any $x \in A$, $f(x) = \rho(x, c) = d(g(x), g(c)) = d(\sigma^{-1}(g(x)), \sigma^{-1}(g(c))) = d(x, e)$ as wished.
\end{proof}
We will show that $\UU_\QQ$ is the unique countable rational metric space such that for any $A \subseteq X$ finite and rational Katětov map on $A$, there is $b \in X$ realizing $f$.
\begin{proof}
	Let $(X, \rho)$ be a metric space with this property, we will show that $(X, \rho) \cong (U_\QQ, d)$.
	We will show by induction that for every $X_n^f$ (as defined in part 1) there is $Y \subseteq X$ such that $(X_n^f, f) \cong (Y, \rho \restriction Y^2)$.
	The case of $n = 1$ is trivial as the single metric on single valued space is $0$. \\
	Let us assume the claim holds for $m < n$ and let $X_n^f$ be some finite and rational metric space.
	Take $(X_{n - 1}^{f \restriction X_{n - 1}^2}, f \restriction X_{n - 1}^2)$, we get a sub-metric space of size $n - 1$, meaning that there is some such $Y \subseteq X$ and let $\sigma : X_{n - 1} \leftrightarrow Y$.
	Define $g : Y \to \QQ_{\ge 0}$ by $g(x) = f(n - 1, \sigma^{-1}(x))$, then $g$ is a Katětov map, as a result of the last subpart.
	There is an element $b \in X$ that realizes $g$, therefore $\rho(x, b) = g(x) = f(n - 1, \sigma^{-1}(x))$, meaning that $f(\sigma^{-1}(\cdot), \sigma^{-1}(\cdot)) = \rho \restriction {(Y \cup \{ b \})}^2$.

	We have shown that $\{ X_n^f \mid n < \omega, f \text{ is a metric} \} \subseteq \age(\Xx)$ for $\Xx$ the equivalent of $(X, \rho)$, therefore $\age(\Xx) = \Kk = \age(\UU_\QQ)$, then $\Xx \cong \UU_\QQ$.
\end{proof}

\subquestion{}
Let $\UU$ be the completion of $\UU_\QQ$,
we will show that any finite metric space $(X, d)$ is isometrically embedded into $\UU$.
\begin{proof}
	The proof is by induction over $n = |X|$.
	For $n = 1$ the proposition is trivial.
	Assume that the proposition holds for $m < n$ and prove for $n$.
	Let $x_0 \in X$ be some element and let $Y = X \setminus \{ x_0 \}$ and therefore $(Y, d \restriction Y^2)$ is a finite metric space of size $n - 1$.
	The induction hypothesis holds for $Y$, and let us denote $\varphi : (Y, d \restriction Y^2) \to \UU$ isometry embedding of $Y$ in $\UU$.

	Denote $X = \{ x_m \mid m < n \}$, and let $\varepsilon > 0$.
	For any $0 < m$ there is $|u_m^\varepsilon - \varphi(x_m)| < \varepsilon$ such that $u_m^\varepsilon \in U_\QQ$.
	By the last part we also deduce that there is $u_0^\varepsilon \in U_\QQ$ such that if $(U, \rho)$ is the equivalent metric space of $\UU$,
	then $|d(x_i, x_j) - \rho(u_i^\varepsilon, u_j^\varepsilon)| < \varepsilon$ (Oh yes, this is a diagonal proposition).
	Define the sequences $\langle x_m^{\frac{1}{k}} \mid 0 < k < \omega \rangle$, then $x_m^{\frac{1}{k}} \to x_m$ and let us define $u_0^{\frac{1}{k}}$ as well.
	By our definition of $\langle u_0^{\frac{1}{k}} \mid 0 < k < \omega \rangle$, it is a Cauchy sequence and therefore it converges, let us denote its limit with $u_0$.
	It follows that $|d(x_i, x_j) - \rho(u_i, u_j)| = 0$, meaning that the map $x_i \mapsto u_i$ is an isometry into $\UU$.
\end{proof}

\subquestion{}
We will show that for any $A \subseteq \UU$ finite and Katětov map $f$ on $A$ is realized by point $b \in \UU$.
\begin{proof}
	The proof is identical to the proof of the last two parts, using induction over the size of $A$ and constructing space using rational Katětov functions and their realization.
\end{proof}

\subquestion{}
We will show that every complete separable metric space is isometrically embedded into $\UU$.
\begin{proof}
	By combining part 3 and 4 we get that if $(X, d)$ is a finite metric space and $(X \cup \{ y \}, f)$ is an extension of $(X, d)$, namely $f$ is a metric and $f \restriction X^2 = d$,
	then the isometry embedding of $(X, d)$ into $\UU$ is a sub-extension of $(X \cup \{ y \}, f)$ into $\UU$.

	Let $(X, d)$ be a countable metric space and suppose that $X = \{ x_i \mid i < \omega \}$, then $(\{ x_i \mid i < n \}, d \restriction {(\{ x_i \mid i < n \})}^2)$ is isometrically embedded by $\sigma_n$ into $\UU$,
	and by our assumption $\sigma_i \subseteq \sigma_j$ for all $i < j < \omega$.
	Let us denote $\sigma = \bigcup_{i < \omega} \sigma_n$, then $\sigma : X \to \UU$ is an isometry embedding as for any choice of points $x, y$, there is $n$ such that $x, y \in \{ x_i \mid i < n \}$.

	We can now move to the case of $(X, d)$ complete separable metric space.
	Take $Y \subseteq X$ dense subset, and let $\sigma : Y \to \UU$ be isometry embedding.
	For each $x \in X$ there is a sequence ${(y_n)}_{n = 1}^{\infty} \subseteq Y$ such that $y_n \to x$, and therefore $\sigma(y_n) \to b$ for some $b \in \UU$, we define $x \mapsto b$ for all $x \in X$.
	The result is an isometry embedding $\sigma' : X \to \UU$.
\end{proof}

\question{}
Groups.

\subquestion{}
Let $\Gg$ be a group in the language of group theory.

\subsubsection{i}
Assume that $\Th(\Gg)$ is $\omega$-categorical,
we will show that for every finite $A \subseteq G$, it holds that $\Aa = \langle A \rangle$ is finite, where $\langle A \rangle$ is the subgroup generated by $A$.
\begin{proof}
	Assume that $|G| = \omega$, then $\Gg$ is saturated.
	We assume for the sake of contradiction that the proposition does not hold, meaning that there is $A \subseteq G$ finite with $\langle A \rangle = \Gg$.
	We define $T : A^{< \omega} \to G$ by,
	\[
		\forall f : [n] \to A,
		\quad
		T(f)
		= \prod_{i = 0}^{n - 1} f(i)
	.\]
	and let $p \in S_1(\Gg)$ defined as,
	\[
		p(x)
		= \{ T(f) \ne x \mid f \in A^{< \omega} \}
	.\]
	$p$ is realized in $\Gg$, but by $p$'s definition it holds that if $c \in G$ witnessing $p$ then $c \notin \langle A \rangle$, a contradiction.
\end{proof}

\subsubsection{ii}
Let us assume that for every finite $A \subseteq G$, $|\langle A \rangle|$ is finite as well.
We will show that $\Th(\Gg)$ is not $\omega$-categorical.
\begin{proof}
	Let us construct a counter example.
	Let $\mu_p$ denote Prüfer $p$-group over $\CC$, namely,
	\[
		\mu_p
		= \{ z \in \CC \mid z^p = 1 \}
	.\]
	and $\mu_{\infty} = \bigcup_{0 < n} \mu_p$.
	Each finite $A \subseteq \mu_{\infty}$ equals to $\mu_{\gcd A}$, in particular $\langle A \rangle$ is finite.
	Let $\nu_\infty = \langle \bigcup_{2 < p \in P} \mu_n \rangle$ be the subset of $\mu_\infty$ such that it has no elements of order $2$.
	As a subgroup of $\mu_\infty$, it holds that $\nu_\infty$ also follows the required property, and it is clear that it is countable, therefore we found two such groups that are not isomorphic.
\end{proof}

\subquestion{}
Let $\Gg$ be a group and let us assume that $\Th(\Gg)$ is totally transcendental.
We will show that there is no infinite strictly decreasing sequence of definable subgroups $\langle H_n \mid n < \omega \rangle$.
\begin{proof}
	We will show that if $\Gg$ has definable strictly decreasing subgroups then $\Th(\Gg)$ has the binary tree property.
	Let us assume that $\langle H_n \mid n < \omega \rangle$ is such a sequence, meaning that $\Gg = \Hh_0 > \Hh_1 > \cdots$.
	$H_n$ is definable and let $\varphi_n(x)$ witness it, meaning that $\Gg \models \varphi_i(x) \to \varphi_j(x)$ for any $i < j < \omega$.
	Let $\psi_n(x) = \varphi_n(x) \land (\lnot \varphi_{n + 1}(x))$, namely $\Mm \models \psi_n(x)$ if $x \in H_n \setminus H_{n + 1}$, the sequence is strictly decreasing therefore $\Gg \models \exists x\ \psi_n(x)$ for any $n$.

	For any $n$, we denote $h_n$ as a witness of $\varphi_n \land (\lnot \varphi_{n + 1})$, meaning that $h_n \in H_n \setminus H_{n + 1}$, meaning that $h_n H_{n + 1}$ is a proper coset of $H_{n + 1}$ in $H_n$ (and in $G$).
	We deduce that $H_{n + 1} \cap h_n H_{n + 1} = \emptyset$, and define $\varphi_{n + 1}^{h_n}(x) = \varphi_{n + 1}(h_n^{-1} x)$, hence $\Gg \models \varphi_{n + 1}^g(x) \iff x \in h_n H_{n + 1}$.
	Given a formula $\varphi_n^g$ for some $g \in H$, we can define the following formulas,
	\[
		\varphi_{n + 1}^g(x)
		= \varphi_{n + 1}(g^{-1} x),
		\qquad
		\varphi_{n + 1}^{h_n g}(x)
		= \varphi(g^{-1} h_n^{-1} x)
	.\]
	By $H_{n + 1} \subsetneq H_n$ we get that $g H_{n + 1} \subsetneq g H_n$, therefore $\{ \varphi_n^g, \varphi_{n + 1}^g \}$ is consistent,
	We also get that $\{ \varphi_n^g, \varphi_{n + 1}^{h_n g} \}$ is consistent as a result of the previous statement, but $\Gg \models \varphi_{n + 1}^g(x) \land \varphi_{n + 1}^{h_n g}(x) \iff x \in g H_n, h_n g H_n$,
	but $g H_n \cap h_n g H_n \ne \emptyset \iff h_n H_n \cap H_n \ne \emptyset$, implying that $\varphi_{n + 1}^g \land \varphi_{n + 1}^{h_n g}$ is inconsistent.

	We can now get to the construction of the binary tree.
	Let $T : 2^{< \omega} \to G$ be defined as,
	\[
		T(\eta)
		= \prod_{n \in \eta^{-1}(\{ 1 \})} h_n
	.\]
	and let $\Gamma : 2^{< \omega} \to \form$ defined by,
	\[
		\forall \eta : 2^n \to G,
		\quad
		\Gamma(\eta)
		= \varphi_{n + 1}^{T(\eta)}
	.\]
	$\Gamma$ fulfills the binary tree property, and therefore witnessing that $\Gg$ is not totally transcendental.

	The proposition holds by contra positive principle.
\end{proof}

\question{}
\subquestion{}
Let $(X, \cl)$ be a pre-geometry,
we will show that there is a basis for $X$ and that every two bases have the same cardinality.
\begin{proof}
	We say that a set $B \subseteq X$ is a basis if $\cl(B) = X$ and $\forall b \in B,\ b \notin \cl(B \setminus \{ b \})$ (independent).
	We will show that $B$ is a basis if and only if $B$ is maximally independent. \\
	Assume that $B$ is a basis, and let $x \in X \setminus B$, then $x \in \cl(B)$ and therefore $B$ is maximally independent. \\
	In the other direction, let us assume that $B$ is maximally independent, we will show that $\cl(B) = X$.
	We assume towards contradiction that there is $x \in X \setminus \cl(B)$, and let $B' = B \cup \{ x \}$, thus $x \in \cl(B')$ but $x \notin \cl(B' \setminus \{ x \}) = \cl(B)$.
	For any $b \in B$ we already assumed that $b \notin \cl(B \setminus \{ b \})$, therefore $B'$ is independent and $B' \supsetneq B$, a contradiction.
	
	Let $\Bb = \{ B \subseteq X \mid B \text{ is independent} \}$, notice that $\emptyset$ is independent then $\Bb$ is not empty.
	In intention of using Zorn's lemma, let $C \subseteq \Bb$ be a chain under $\subseteq$, and let $B^* = \bigcup C$.
	If $b \in B^*$, then,
	\[
		\cl(B^* \setminus \{ b \})
		= \bigcup \{ \cl(B_0) \mid B_0 \subseteq B^* \setminus \{ b \}, |B_0| < \omega \}
		\overset{(1)}{=} \bigcup \{ \cl(B_0) \mid \exists B \in C\ B_0 \subseteq B \setminus \{ b \}, |B_0| < \omega \}
		= \bigcup_{B \in C} \cl(B \setminus \{ b \})
	.\]
	where $(1)$ is following from the fact that if $B_0$ is finite and $B_0 \subseteq \bigcup C$ then there is an element in the chain such that $B_0 \subseteq B \in C$.
	All $B \in C$ are independent then $b \notin \cl(B \setminus \{ b \})$, it follows that $b \notin \cl(B^* \setminus \{ b \})$ as well, $B^*$ is independent and maximal.
	The conditions for Zorn's lemma are fulfilled, as a result $\Bb$ has a maximal element, in other words there is $B \in \Bb$ that is maximally independent, and thus a basis.

	Let $B_1, B_2 \subseteq X$ be bases for $(X, \cl)$, we will show that $|B_1| = |B_2|$.
	Let $B_1 = \{ b_{\alpha} \mid \alpha < \kappa \}$, for any $\alpha$, $\alpha \in \cl(B_2)$, so there is finite set $B_0^{\alpha} \subseteq B_2$ such that $b_{\alpha} \in \cl(B_0^{\alpha})$.
	Take $C = \bigcup_{\alpha < \kappa} B_0^{\alpha}$, then $B \subseteq \cl(C) \implies X = \cl(B) \subseteq \cl(\cl(C)) = \cl(C) \implies \cl(C) = X$ and $|C| = \kappa$ as a union of finite sets.
	Notice that $C \subseteq B_2$, then $|B_1| = |C| \le |B_2|$, by symmetry it also follows that $|B_2| \le |B_1|$ and by CSB $|B_1| = |B_2|$.
\end{proof}

\subquestion{}
Let $T$ be a countable complete $\aleph_1$-categorical theory.
We will show that $T$ has at most $\aleph_0$ different isomorphism classes for countable models.
\begin{proof}
	
\end{proof}

\end{document}
