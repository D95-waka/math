\newcounter{english}
\input{../article_base.tex}
\title{Final Exercise Answer Sheet --- Logic Theory (2), 80424}

\DeclareMathOperator{\PA}{PA}
\DeclareMathOperator{\Coll}{Coll}
\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\Sat}{Sat}
\DeclareMathOperator{\pr}{Pr}
\DeclareMathOperator{\sent}{sent}
\DeclareMathOperator{\form}{form}
\DeclareMathOperator{\val}{Val}
\DeclareMathOperator{\sat}{Sat}
\DeclareMathOperator{\term}{term}
\DeclareMathOperator{\sk}{Sk}

\begin{document}
\maketitle
\maketitleprint[yellow]

\question{}
\subquestion{}
Let $U \subseteq \Pp(\NN)$ be a non-principal ultrafilter, let $\langle \Mm_n \mid n < \omega \rangle$ be a sequence of $L$-structures, and $\Mm = \prod_{n < \omega} \Mm_n / U$. \\
We will show that for every countable consistent set of formulas $\Gamma(x)$ with parameters from $M$ is realized in $\Mm$, namely that $\Mm$ is countably saturated.
\begin{proof}
	Take a coverage $\langle \Sigma_n(x) \mid n < \omega \rangle \subseteq \Gamma(x)$ such that $|\Sigma_n| < \omega$ for all $n$.
	Then $\Sigma_n$ is realized, and let $[f_n] \in M$ be such that $\Mm \models \Sigma_n([f_n])$.
	Then $a_n = \{ j < \omega \mid \Mm_n \models \Sigma_n(f_n(j)) \} \in U$.
	Filters are closed to intersection, then let us assume that $a_{n + 1} \subseteq a_n$, otherwise we could define,
	\[
		g_{n + 1}(i) = \begin{cases}
			f_{n + 1}(i) & i \in a_n \\
			c_n & \text{otherwise}
		\end{cases}
	\]
	where $c_n \in M_n$ is some arbitrary value.

	We now take $a = \bigcap_{n < \omega} a_n$ and $[f] \in M$ such that for $n \in a$, $f(n) \in \{ f_i(n) \mid i < \omega \}$.
	If $a \in U$ then $\Mm \models \Gamma([f])$, then let us assume $a \notin U$, conversely $a^C = \NN \setminus a \in U$.
	$a^C \cap a_n \in U$ for all $n$ and therefore $a^C \cap a_n \ne \emptyset$.
	It immediately follows that $\emptyset \in U$, a contradiction.
\end{proof}

\subquestion{}
We define $\sigma$-complete ultrafilter $U$ as an ultrafilter such that it is closed to countable intersections. \\
Let $U$ be some $\sigma$-complete ultrafilter, $L = \{ = \}$, $\Mm = {(\NN, =)}^I / U$ for some index set $I$. \\
We will show that $|M| = \omega$ and deduce that $\Mm$ is not countably saturated.
\begin{proof}
	Directly by Łoś theorem and sentence of the form $\varphi_N = \bigwedge_{n < N} \exists x (x \ne c_n)$ we deduce that $|M| \ge \omega$.
	Define $C_x = {\{ x \}}^I$ the constant function, we will show that for every $[f] \in M$ there is $n < \omega$ such that $[f] = [C_n]$.
	Note that this is equivalent to the claim that $\{ j < \omega \mid f(j) = n \} \in U$.
	We will assume otherwise in contradiction, then $a_n = \{ j < \omega \mid f(j) \ne n \}$ is in $U$, and $a_n \cap a_m$ is non-empty for all $n \ne m$.
	We take $a = \bigcap_{n < \omega} a_n$, $U$ is $\sigma$-complete therefore $a \in U$.
	It follows that $f(j) \ne n$ for all $j \in I, n < \omega$, a contradiction to $f$ being $I \to \NN$ function.
\end{proof}

\subquestion{}
We will show that if $U$ is an ultrafilter on some indices set $I$ such that $U$ is not $\sigma$-complete and $\langle \Mm_i \mid i \in I \rangle$, \\
then $\Mm = \prod_{i \in I} \Mm_i / U$ is countably saturated.
\begin{proof}
	By $\sigma$-incompleteness we can assume that there is decreasing chain $\langle u_n \mid j < \omega \rangle \subseteq U$ such that $\bigcap_{n < \omega} u_n \notin U$.
	We can assume without loss of generality that $\bigcap u_n = \emptyset$ as $I \setminus \bigcap u_n \in U$ and therefore we can take $u_n \setminus \bigcap u_m$.

	Let $\Gamma(x)$ be countably realized set of formulas.
	By countability let us denote $\Gamma(x) = \{ \gamma_n \mid n < \omega \}$.
	For every $N < \omega$ we also define $\Gamma_N = \{ \gamma_n \mid n < N \}$.
	Then $\Gamma_N$ is finite set of formulas, and realized by $[f_N] \in M$.
	We can take $f_N$ such that,
	\[
		a_N = \{ j \in I \mid \Mm_j \models \Gamma_N(f_N(j)) \}
		\subseteq \{ j \in I \mid \Mm_j \models \Gamma_N(f_M(j)) \}
	\]
	for $M < N$ by finite intersections.
	The sequence $\langle a_n \mid n < \omega \rangle \subseteq U$ is decreasing.
	Let us take $U_n = u_n \cap a_n$ for every $n$, clearly $U_n \in U$.
	Note that for every $i \in I$ there is maximal $n < \omega$ such that $i \in U_n$, and let us define $f(i) = f_n(i)$.
	Indeed $f \in M$ and,
	\[
		\Mm \models \gamma_n([f])
		\iff \{ j \in I \mid \Mm_j \models \gamma_n(f(j)) \} \in U
		\impliedby \{ j \in I \mid \Mm_j \models \gamma_n(f_n(j)) \} \in U
	\]
	but the latter holds directly by the definition of $f$.
\end{proof}

\question{}
We will show that the following are equivalent,
\begin{enumerate}
	\item The axiom of choice
	\item
		\begin{enumerate}
			\item The ultrafilter lemma: Every filter extends to an ultrafilter
			\item Alternative version of Łoś theorem: If $\Mm$ is an $L$-structure and $U$ is an ultrafilter on indices set $I$, then for any sentence $\varphi$, $\Mm^I / U \models \varphi \iff \Mm \models \varphi$
		\end{enumerate}
\end{enumerate}
\begin{proof}
	$1 \implies 2$.
	We saw in class that the ultrafilter lemma is directly deduced from Zorn's lemma, which is equivalent to the axiom of choice;
	Let $D$ be a filter, we define the order $X = \langle \{ D \subseteq F \subseteq \Pp(I) \mid F \text{ is a filter} \}, \subseteq \rangle$.
	$X$ is clearly not empty as $D \in X$. Let $C \subseteq X$ be a chain, and let $D_C = \bigcup C$.
	Then $D_C$ is a filter and in particular $D \subseteq D_C$, then $D_C \in X$ and $F \subseteq D_C$ for all $F \in C$.
	By Zorn's lemma there is maximal element $U_D \in X$, namely $F \subseteq U_D$ for all $F \in X$. \\
	It reminds to show that maximal filter is an ultrafilter, then let us assume in contradiction that it is not, meaning that there is $A \subseteq I$ such that $A \notin U_D$ as well $I \setminus A \notin U_D$.
	We can define $U = \langle U_D \cup \{ A \} \rangle$, this is a filter such that $U_D \subsetneq U$, a contradiction to $U_D$ being maximal.

	As for the alternative version of Łoś theorem, it is derived from the general version for ultra-powers.
	While we will not recite the whole proof, we will note where it uses choice.
	The axiom of choice is being used in the proof at induction step for quantifiers, specifically to get a witness to global quantifiers.

	$2 \implies 1$.
	Let $A$ be some set, and let us assume toward a contradiction that there is no choice function $A \to \bigcup A$.
	We define $S \subseteq \Pp(A)$ the set of all subsets of $A$ that do have choice function.
	In particular $\emptyset \in S$ as $\emptyset \to \bigcup \emptyset = \emptyset$ is witnessed by $\emptyset$.

	Let $B \subseteq S$ and $f : B \to \bigcup B$ choice function, namely $\forall b \in B,\ f(b) \in b$.
	For every $B' \subseteq B$ consider $f' = f \restriction B'$.
	$f'(b) \in b$ directly by $f$'s definition, then $\rng f' \subseteq \bigcup B'$.
	We conclude that $B' \in S$, meaning $S$ is closed under subsets.

	Let $B, C \in S$, we will show that $B \cup C \in S$ as well.
	We will assume that they are disjoint, as otherwise we can take $B' = B \setminus C \subseteq B$ by closeness to subsets.
	if $f : B \to \bigcup B, g : C \to \bigcup C$ such that $\forall b \in B, c \in C,\ f(b) \in b, g(c) \in c$, then $h = f \cup g$ is well-defined function,
	as for each $x \in \dom h$, either $x \in B$ or $x \in C$.
	Also $f(x) \in B \lor f(x) \in C$ then $f(x) \in B \cup C$.
	We deduce that $S$ is closed to finite unions by induction.

	We define $D = \Pp(A) \setminus S$, the collection of subsets such that there is no choice function over them. In particular by our assumption $A \in D$.
	By inversion we conclude that $D$ is closed under super-sets and finite intersections, as well $\emptyset \notin D$, then $D$ is a filter.
	Using the ultrafilter lemma we define $D \subseteq U$ an ultrafilter extending $D$.

	Let us define $\Mm = \langle \bigcup A, R \rangle$ such that $\langle x, y \rangle \in R^\Mm \iff \exists a \in A,\ x, y \in a$.
	We assume that $a \cap b = \emptyset$ for all $a, b \in A$ as well.
	Then $R^\Mm$ is equivalency relation, and therefore $R^{\Mm^A / U}$ is as well.
	Let $B \in S$ be some non-trivial set and let $g : B \to M$ be choice function.
	then $[g] \in \Mm^A / U$.
	We assumed that $B$ is not trivial then there are $x, y \in A$, $\langle g(x), g(y) \rangle \notin R^{\Mm}$.
	But then it immediately follows that $\langle [g], [c_{g(x)}] \rangle, \langle [g], [c_{g(y)}] \rangle \in R^{\Mm^A / U}$ in contradiction to $\langle [c_{g(x)}], [c_{g(y)}] \rangle \notin R^{\Mm^A / U}$.
\end{proof}

\question{}
We will show that if $t$ is a term that does not contain the variable $v$, and $\varphi \in \Sigma_0^0$,
then $\forall v \le t\ \varphi$ is $\Sigma_0^0$-formula as well.
We will conclude that $\Sigma_0^0$ is closed under bounded quantification with general terms.
\begin{proof}
	TODO
\end{proof}

\question{}
Let $T$ be a theory.
We will show that the following are equivalent.
\begin{enumerate}
	\item $T$ is axiomatizable
	\item $T$ is recursively-enumerable
	\item There is a recursively-enumerable set $\Sigma$ such that $\cl \Sigma = T$
\end{enumerate}
\begin{proof}
	$1 \implies 2$.
	$T$ is a theory, meaning that $T = \cl T$, and by the assumption that it is axiomatizable there is $\Sigma$ recursive set of sentences such that $T = \cl \Sigma$.
	We proved in class that $\pr(x, y)$ is a recursively-enumerable function,
	where it holds if and only if $x$ is a Gödel number for set of recursively-enumerable formulas and $y$ is Gödel number for formulas $\varphi$, and $\Sigma \models \varphi$.
	By our definition, $T = \cl_{\models} \Sigma = \{ \lceil \varphi \rceil \mid \varphi \in \operatorname{sent}, \pr(\lceil \Sigma \rceil, \lceil \varphi \rceil) \}$.
	If we define $f(n) = \pr(\lceil \Sigma \rceil, n)$ we get $T = \dom f$ and by equivalency to recursively-enumerable lemma, it follows that $T$ is recursively-enumerable.

	$2 \implies 3$.
	$T$ is a theory, then $\cl T = T$, then if we define $\Sigma = T$ we get that $\Sigma$ is recursively-enumerable and $\cl \Sigma = T$.

	$3 \implies 1$.
	Let $f$ be recursive function such that $\dom f = \Sigma$ for recursively-enumerable $\Sigma$, $\cl \Sigma = T$.
	Notice that if $f(n)$ is defined then $\pr(\lceil \Sigma \rceil, n)$ is also defined and returns $1$, then let us assume that $f(n) = \pr(\lceil \Sigma \rceil, n)$.
	We also know that $g : \NN \to \{ 0, 1 \}$ such that $g(n) = 1 \iff \exists \varphi \in \sent_{L_{\PA}},\ n = \lceil \varphi \rceil$ is full recursive function.
	Then $h(n) = f(g(n) \cdot n)$ is recursive function such that $T = h^{-1}(\{ 1 \})$, and witnessing $T$ being axiomatizable.
\end{proof}

\question{}
\subquestion{}
We will show that if $f : \NN^k \to \NN$ is primitive-recursive function then there is a $\Sigma_1$-formula $\varphi(x_0, \ldots, x_{k - 1}, y)$ defining $f$,
such that $\PA \vdash \exists \bar{x} \exists y\ \varphi(\bar{x}, y)$.
\begin{proof}
	We defined primitive-recursive functions in such way that they are recursive in particular, and then proved that every recursive function is $\Sigma_1^0$.
	Let us define $\varphi(\bar{x}, y) = \exists z \psi(\bar{x}, y, z)$ for $\psi \in \Sigma_0$.
	It is clear that $\varphi$ is $\Sigma_1$-formula such that $\varphi(\bar{x}, y) \iff f(\bar{x}) = y$, and thus it is suffices to show that $\PA$ proves that $f$ is total.

	In the proof of the claim from class that we used, we could also prove that the formula is total in $\PA$,
	as for constant and successor functions the claim is trivial in $\PA$, for composition it is immediate from witness choosing, and for closure to primitive recursion it follows from totality of the recursive functions.
\end{proof}

\subquestion{}
We will show that the above claim does not hold for general recursive functions.
\begin{solution}
	We will find total recursive function $f : \NN \to \NN$ such that for any $\Sigma_1$-formula $\varphi(x, y)$, it fulfills $\PA \not\vdash \forall x \exists y\ \varphi(x, y)$.

	In class we defined a variant of Ackerman function $B : \NN^2 \to \NN$.
	It is clear that in $\hat{\NN}$ the function $B \circ \operatorname{cd}$ is total $\NN \to \NN$ function.
	We have also shown that $B$ is not primitive-recursive.

	If we show that in other models of $\PA$ the function is not total then we are done.
	Let us assume towards a contradiction that indeed the claim that $B$ is total is provable in $\PA$, then the claim holds for every model of $\PA$.
	In particular, consider a non-standard model $\Nn$, meaning that there is $\alpha \in N$ such that there is an infinite decreasing chain of elements of $C \subseteq \Nn$,
	in which exists $\alpha_1 \in C$ such that $S(\alpha_1) = \alpha$ et cetera.
	Then $B(\alpha, \alpha)$ is not defined, a contradiction.
\end{solution}

\question{}
Assuming that $\Mm \models \PA$, such that $c \in M$ is non-standard, and let us define $N = \bigcup_{n \in \NN} \{ x \in M \mid x \le^\Mm c^n \}$. \\
We will show that $\Nn \subseteq \Mm$ and that $\Nn \not\models \PA$.
\begin{proof}
	Let $x, y \in N$, we will show that $x + y, x \cdot y \in N$ as well.
	Consider $m \in \NN$ such that $x, y \le c^m$, there must be such $m$ as $\le^\Mm$ is linear.
	It follows that,
	\[
		x + y
		\le c^m + c^m
		= 2 \cdot c^m
		\le c \cdot c^m
		= c^{m + 1}
	\]
	In particular for $y = 1$ we get that $S(x) \in N$.
	We can also see that,
	\[
		x \cdot y
		\le c^m \cdot c^m
		\le c^{2m}
	\]
	Therefore $S(x), x + y, x \cdot y \in N$, meaning that it is a set closed to functions of $\Mm$, we conclude that $\Nn \subseteq \Mm$.

	Let us define the partial function $H : \NN^3 \to \NN$
	\[
		H(n, x, k)
		= x \cdot k
	\]
	and $G = c_1$, then by induction scheme there exists primitive-recursive function $F : \NN^2 \rightharpoonup \NN$ defined by,
	\[
		F(x, 0) = 1,
		\quad
		F(x, n + 1)
		= x \cdot F(n)
	\]
	This is a primitive-recursive from definition therefore it is total, and we denote $x^n = F(x, n)$ for all $x$ and $n$.
	In particular, consider $e = c^c$, this element fulfills $e \in M$, we will show that $e \notin N$.

	the function $F$ fulfills $\PA \models n < m \implies x^n < x^m$ for any $x > 1$.
	The proof is by fixation of $n$, induction over $m$ and then induction over $n$.
	We start by showing that $x^n < x^{S(n)}$, as for $n = 0$ we get $1 < x$ and if $x^n < x^{S(n)}$ then $x \cdot x^n < x \cdot x^{S(n)} \iff x^{S(n)} < x^{S(S(n))}$.
	We can now fix $n$ and prove that $x^n < x^m$ for all $n < m$.
	This time we use $m = S(n)$ as the recursion base, this was proven already.
	The step is identical to the first case.
	We infer from induction scheme that indeed $n < m \implies x^n < x^m$.

	$c \in M$ is non-standard, then $\underline{n} < c$ for all $n \in \hat{\NN}$, it is implied that $c^n < c^c = e$ for all $n$.
	If $x \in N$, then there exists $n \in \hat{\NN}$ such that $x \le c^n < c^{S(n)} < c^c = e$, meaning that $x < e$ for all $x \in N$, as a result $e \notin N$.

	We assume in contradiction that $\Nn \models \PA$, then $F$ is definable and primitive-recursive over $\Nn$.
	We also know that $c \in N$ as $c \le^\Mm c^1$, then $d = F^\Nn(c, c)$ fulfills that $d \in N$ but $\Nn \subseteq \Mm$ and $F^\Nn(c, c) = F^\Mm(c, c) = e \notin N$, a contradiction.
\end{proof}

\question{}
Let $L$ be some language such that it has Gödel numbering.
Let $X$ be a family of sentences in $L$, and,
\begin{align*}
	& \sat(X)
	= \{ \lceil \varphi \rceil \mid \varphi \in X, \exists \Mm,\ \Mm \models \varphi \} \\
	& \sat_{\infty}(X)
	= \{ \lceil \varphi \rceil \mid \varphi \in X, \varphi \text{ has an infinite model} \} \\
	& \val(X)
	= \{ \lceil \varphi \rceil \mid \varphi \in X \land \models \varphi \}
\end{align*}

For this question we assume that $X$ is recursive.
\subquestion{}
We will show that $\sat(X)$ is recursive if and only if $\val(\lnot X)$ is recursive and $\sat(\lnot X)$ is recursive if and only if $\val(X)$ is recursive.
\begin{proof}
	Assume that $\sat(X)$ is recursive, then $X \setminus \sat(X)$ is recursive as well, and by definition $\varphi \in X \setminus \sat(X)$ if there is no model that satisfy $\varphi$.
	But this is exactly $\val(\lnot X)$, as it is the set of sentences such that a sentence $\varphi$ is in $\val(X)$ if $\lnot \varphi$ is tautology, meaning that $\varphi \equiv_{\operatorname{tau}} \perp$.

	Let us assume that $\val(\lnot X)$ is recursive.
	We deduce that $X \setminus \val(X)$ is recursive as well, and yet again by direct definition it is exactly $\sat(X)$.

	The last part of the claim follows from the first part and the fact that $\lceil \varphi \rceil \to \lceil \lnot \varphi \rceil$ is recursive map.
\end{proof}

\subquestion{}
We will show that if $\sat_{\infty}(X)$ is recursive, then $\sat(X)$ is recursive as well.
\begin{proof}
	We notate $\sat_{< \infty}(X) = \{ \lceil \varphi \rceil \in X \mid \exists \Mm \models \varphi, |M| < \infty \}$ the set of sentences of $X$ that are right in some finite model.
	$\sat(X) = \sat_{< \infty}(X) \cup \sat_{\infty}(X)$, and we know that finite union of recursive sets is recursive, then it suffices to show that $\sat_{< \infty}(X)$ is recursive set.
	In the previous course we had shown that there is an embedding between finite models of a countable language and sentences, up to model isomorphism.
	We also saw an algorithm to build such sentences, and can enumerate through it,
	meaning that we can assume that there is $m : \NN \to \NN$ function such that if $\Mm$ a model of $L$ then exists $i \in \NN$ such that $m(i) = \lceil \varphi \rceil$ for $\Mm \models \varphi$.

	By our definition of $\sat_{< \infty}(X)$, an element $n \in \NN$ fulfills $n \in \sat_{< \infty}(X)$ if and only if $\exists i,\ m(i) \models \varphi$, or by using Gödel numbers,
	\[
		\exists i \pr(m(i), n)
		\iff n \in \sat_{< \infty}(X)
	\]
	We can now define $\psi_0(x) = x \in \sat_{\infty}(X) \lor \exists i \pr(m(i), x)$, this is a $\Sigma_1^0$ formula, but it is not clear that it is $\Pi_1^0$ as well.

	$x \notin \sat(X)$ if and only if $x \in \val(\lnot X)$ by the previous part, then $\psi_1(x) = \lnot \pr(x, \lceil \perp \rceil)$ fulfills,
	\[
		\psi_1(x)
		\iff \lnot (x \in \val(\lnot X))
		\iff \lnot (x \notin \sat(X))
		\iff x \in \sat(X)
	\]
	$\psi_1$ is $\Sigma_1^0$ formula and therefore $\lnot \psi_1$ is $\Pi_1^0$. \\
	But it is implied that $\psi_0 \equiv \psi_1$, in particular $\psi_0 \in \Delta_1^0$.
	We deduce that $\psi_0$ defining recursive set, and that this set is exactly $\sat(X)$.
\end{proof}

\question{}
Assume that $L$ is some language and $\varphi(x, y_0, \ldots, y_{k - 1})$ is some formula and that $\Mm$ is an $L$-structure,
A function $f : M^k \to M$ is called \textit{Skolem function for $\varphi$} if for every $a_0, \ldots, a_{k - 1} \in M$,
\[
	\Mm \models \exists x\ \varphi(x, a_0, \ldots, a_{k - 1})
	\implies \Mm \models \varphi(f(a_0, \ldots, a_{k - 1}), a_0, \ldots, a_{k - 1})
\]
A theory $T$ is said to \textit{has a built-in Skolem functions} if for every such formula $\varphi$ there is a term in the language, \\
$t_{\varphi}(y_0, \ldots, y_{k - 1})$, such that $t_\varphi^\Mm$ is a Skolem function for $\varphi$ for any $\Mm \models T$.

\subquestion{}
We will show that if $T$ has a built-in Skolem functions, then $T$ has quantifier elimination,
meaning that for every formula $\psi(x_0, \ldots, x_{n - 1})$ there is a quantifier free formula $\psi'(x_0, \ldots, x_{n - 1})$ such that $T \vdash \forall \bar{x} (\psi \leftrightarrow \psi')$.
\begin{proof}
	The proof is by induction over the structure of the formula.
	For atomic formulas the claim is trivial, as there are no quantifiers in such formulas.
	In the same meaner, binary operations and $\lnot$ preserve quantifier-free formulas.

	We move to the case of existential quantifiers.
	Assume that $\varphi(x_0, \ldots, x_{n - 1}) = \exists v\ \psi(v, x_0, \ldots, x_{n - 1})$, for $\psi$ quantifier-free formula.
	$T$ has built-in Skolem function to $\psi$, $t = t_{\psi}(x_0, \ldots, x_{n - 1})$, such that for $a_0, \ldots, a_{n - 1} \in M$,
	\[
		\Mm \models \varphi(a_0, \ldots, a_{n - 1})
		\implies \Mm \models \psi(t^\Mm(a_0, \ldots, a_{n - 1}), a_0, \ldots, a_{n - 1})
	\]
	It follows that also,
	\[
		\Mm \models \varphi(a_0, \ldots, a_{n - 1}) \to \psi(t^\Mm(a_0, \ldots, a_{n - 1}), a_0, \ldots, a_{n - 1})
	\]
	By defining $\varphi' = \psi_t^v$, and the fact that $\bar{a}$ is arbitrary,
	\[
		\Mm \models \forall \bar{x} (\varphi \to \varphi')
	\]
	It is trivial that $\Mm \models \forall \bar{x} (\varphi' \to \varphi)$ then,
	\[
		\Mm \models \forall \bar{x} (\varphi \leftrightarrow \varphi')
	\]
	This holds for any $\Mm \models T$, then by the completeness theorem, $T \vdash \forall \bar{x} (\varphi \leftrightarrow \varphi')$.
\end{proof}

\subquestion{}
We will show that if $T$ has built-in Skolem functions and $\Mm \models T$, then any $\Nn \subseteq \Mm$ is an elementary substructure.
\begin{proof}
	For any substructure $\Nn \subseteq \Mm$ and quantifier-free closed-sentence $\varphi$, $\Mm \models \varphi \iff \Nn \models \varphi$.
	This claim was proven in the previous course.
	We also saw in the last part that for each $\varphi \in \sent_L$ there is $\varphi'$ which is quantifier-free and $T \vdash \varphi \leftrightarrow \varphi'$.
	In particular if $\varphi \in T$ then $\varphi' \in T$, and defining,
	\[
		T'
		= \{ \varphi' \mid \varphi \in T \}
	\]
	We get $T = T'$.
	It is implied that we can assume without loss of generality that $T$ is quantifier-free, and that $\Nn \models T$.

	In intention to use Tarski-Vaught test,
	let $\varphi(x_0, \ldots, x_{n - 1}) = \exists v\ \psi(v, x_0, \ldots, x_{n - 1})$ and $a_0, \ldots, a_{n - 1} \in N$.
	Assume that $\Mm \models \varphi(a_0, \ldots, a_{n - 1})$, and we will find $b \in N$ such that $\Mm \models \psi(b, a_0, \ldots, a_{n - 1})$. \\
	By the last part, let $\varphi'$ be quantifier-free formula such that $\Mm \models \forall \bar{x} (\varphi \leftrightarrow \varphi')$.
	$\Nn \subseteq \Mm$ and $a_0, \ldots, a_{n - 1} \in N$, then $\Nn \models \varphi'(a_0, \ldots, a_{n - 1})$.
	By out initial assumption $\Nn \models T$, then $\Nn \models \varphi(a_0, \ldots, a_{n - 1}) \iff \Nn \models \exists v\ \psi(v, a_0, \ldots, a_{n - 1})$.
	Let $b = v^\Nn$ the witness to the sentence, then $b \in N$ and from Tarski-Vaught $\Nn \prec \Mm$.
\end{proof}

\subquestion{}
We will show that for any language $L$ there is some language $L_{\sk} \supseteq L$ and some $L_{\sk}$-theory $S$ such that the following holds:
\begin{enumerate}
	\item $S$ is universal,
		every sentence in the axioms of $S$ is of the form $\forall x_0 \ldots \forall x_{n - 1}\ \psi$ such that $\psi$ is quantifier-free
	\item If $\Mm$ is an $L$-structure then there is an expansion of $\Mm$ to a structure $\Mm_{\sk} \models S$
	\item $S$ has built-in Skolem functions in $L_{\sk}$
\end{enumerate}
\begin{proof}
	Let us define,
	\[
		L_{\sk}
		= L \cupdot \{ f_{\varphi} \mid \varphi = \exists v\ \psi(v, x_0, \ldots, x_{n - 1}),\ \psi \in \form_L \}
	\]
	An extension of $L$ such that every formula of n free variables of the stated form has n-placed function symbol $f_{\varphi}$.
	We define the theory,
	\[
		S
		= \{ \forall y_0 \ldots \forall y_{n - 1}\ (\varphi(y_0, \ldots, y_{n - 1}) \to \psi(f_{\varphi}(y_0, \ldots, y_{n - 1}), y_0, \ldots, y_{n - 1}))
		\mid \varphi = \exists v\ \psi(v, x_0, \ldots, x_{n - 1}),\ \psi \in \form_L \}
	\]
	namely, $f_{\varphi}$ is a Skolem function of $\psi$ in $S$.

	\textbf{3.}
	If $\Mm \models S$ and $\varphi(x, y_0, \ldots, y_{n - 1})$ some $L_{\sk}$-formula, then we will choose $t_{\varphi}(x_0, \ldots, x_{n - 1}) = f_{\varphi}$.
	By our theory's definition,
	\[
		\Mm \models \forall y_0 \ldots \forall y_{n - 1}\ (\exists y\ \varphi(y, y_0, \ldots, y_{n - 1}) \to \varphi(f_{\varphi}(y_0, \ldots, y_{n - 1}), y_0, \ldots, y_{n - 1}))
	\]
	If $a_0, \ldots, a_{n - 1} \in M$ then in particular,
	\[
		\Mm \models \exists y\ \varphi(y, y_0, \ldots, y_{n - 1}) \to \varphi(t^\Mm(y_0, \ldots, y_{n - 1}), y_0, \ldots, y_{n - 1})
	\]
	and by inverting Modus ponens,
	\[
		\Mm \models \exists y\ \varphi(y, y_0, \ldots, y_{n - 1})
		\implies \Mm \models \varphi(t^\Mm(y_0, \ldots, y_{n - 1}), y_0, \ldots, y_{n - 1})
	\]
	Then $S$ indeed has built-in Skolem functions.

	\textbf{1.}
	Follows immediately from the last part and \textbf{1}.

	\textbf{2.}
	Let $\Mm$ be some $L$-structure.
	Using the well-ordering principle, let $\langle M, \le \rangle$ be a well-order. \\
	For some formula $\varphi(x, x_0, \ldots, x_{n - 1})$, we define,
	\[
		f_{\varphi}^\Mm(x_0, \ldots, x_{n - 1})
		= \begin{cases}
			\min_{\le} \{ a \in M \mid \Mm \models \varphi(a, x_0, \ldots, x_{n - 1}) \} & \Mm \models \exists x\ \varphi(x, x_0, \ldots, x_{n - 1}) \\
			z & \text{otherwise}
		\end{cases}
	\]
	for $z \in M$ some arbitrary value.
	By out definition it is clear that $\Mm \models S$.
\end{proof}

\subquestion{}
We will check if $\PA$ has built-in Skolem functions, and if it has definable built-in Skolem functions.
\begin{solution}
	We assume towards a contradiction that $\PA$ has built-in Skolem functions.
	We know that there is some recursive function that is not primitive-recursive, notate it by $y = b(n) \iff \varphi(y, x)$.
	This is $\Sigma_1^0$ formula by equivalency to recursive functions, hence $\varphi = \exists z\ \psi(z, y, x)$.
	It follows from part b that there is quantifier-free formula equivalent to $\varphi$, and therefore it is equivalent to bounded-quantifier formula, then $b$ is primitive-recursive, a contradiction.

	I want to say that $\PA$ does not has definable Skolem functions, as we can take $\varphi \in \Sigma_3 \setminus \Sigma_2$ and if it were to be definable then $\varphi \in \Sigma_1^0$, which is not possible.
\end{solution}

\question{}
Let $L = \{ F_{i, j} \mid i, j \in \NN \}$ be a language such that $F_{i, j}$ is a $j$-place function symbol.
Let $E$ be the set of existential sentences, namely the sentences of the form $\exists x_0 \ldots \exists x_{n - 1}\ \psi$ where $\psi$ is quantifier-free,
and let $A$ be the set of universal sentences, meaning the sentences of the form $\forall x_0 \ldots \forall x_{n - 1}\ \psi$ for quantifier-free $\psi$. \\
We will show that $\val(E)$ is not recursive.
\begin{proof}
	The claim is equivalent to the claim that $\val(A)$ is not recursive by question 7 part a and the fact that,
	\[
		\exists x_0 \ldots \exists x_{n - 1}\ \psi
		\equiv \lnot \lnot \exists x_0 \ldots \exists x_{n - 1}\ \psi
		\equiv \lnot \forall x_0 \ldots \forall x_{n - 1}\ (\lnot \psi)
	\]
	and that if $\psi$ is quantifier-free then $\lnot \psi$ is as well.

	Let $L_F = \{ F_{0, 2} \} \subseteq L$ be reduction of $L$.
	We assume toward a contradiction that $\val(E)$ is recursive, and will show that $\val(\sent_{L_F})$ is recursive as well.

	TODO
\end{proof}

\question{}
\begin{remark}
	If $A$ is some set, then ${[A]}^n = \{ B \subseteq A \mid |B| = n \}$.
\end{remark}
We will prove Ramsey's theorem,
namely that for $m, r \in \NN$, and $f : {[ \NN ]}^r \to [m]$, there is an infinite subset $A \subseteq \NN$ such that $f \restriction {[ A ]}^r$ is constant. \\
We will conclude the finite version of the theorem.
\begin{proof}
	We will show it by induction over $r$.

	For $r = 1$ the claim is trivial, then let $r = 2$.
	Let $a_0 = 0$ and $B_0 = \NN$, and let $h : B_0 \setminus \{ a_0 \} \to [m]$ by,
	\[
		\forall b \in B_0 \setminus \{ a_0 \},\ h(b) = f(\{a_0, b\})
	\]
	$h$ fulfills the claim for $r = 1$ and therefore there is some set $B_1 \subseteq B_0 \setminus \{ a_0 \}$ such that $h \restriction B_1$ is constant.
	We define $a_1 = \min B_1$ and $c_0 = h(a_1)$.
	We extend this construction recursively and get $a_0 < a_1 < \cdots$ and $B_0 \supseteq B_1 \supseteq \cdots$ sequences such that $a_n = \min B_n$ for all $n$.
	The construction also gives us some sequence ${\{ c_n \}}_{n = }^\infty \subseteq [m]$, then by pigeonhole principle there is $k \in [m]$ such that $K = \{ n \in \NN \mid c_n = k \}$ is infinite.
	Now consider the set $A = \{ a_n \in \NN \mid n \in K \}$, by its definition for all $a, b \in A$ there is $n \in \NN$ such that $a = a_n$ and $b \in B_{n + 1}$, hence $f(\{a, b\}) = c_n$.
	Thus we conclude that $A$ is both infinite and witnessing the claim for $f$.

	Moving to the induction step, we assume the claim for $r \in \NN$, and show the case of $r + 1$.
	Let $f : {[ \NN ]}^{r + 1} \to [m]$.
	The argument is identical to the case of $r = 2$, let us define $B_0 = \NN$ and $a_0 = 0$.
	We define the function $h : {[ B_0 \setminus \{ a_0 \} ]}^r \to m$, by the induction hypothesis there is $B_1$ such that $h \restriction B_1 = c_i$ for some $i \in [m]$, then let $c_0 = i$ and $a_1 = \min B_1$.
	We get sequences as in the last case and define $k$ and $K$ the same way using pigeonhole yet again.
	In this case $A$ is defined the same way, but we will show that it witnessing the claim using $r$-tuples instead,
	if $b_0, \ldots, b_{r - 1} \in A$ then we take $b = \min\{ b_0, \ldots, b_{r - 1} \}$ and $n \in \NN$ such that $a_n = b$, therefore $b_i \ne b \implies b_i \in B_n$, so $f(\{ b_i \mid i < r \}) = k$.

	The finite version of Ramsey's theorem was proved using the compactness theorem in the previous course and will remain as an exercise to the reader.
	% TODO: Delete this.
\end{proof}

\question{}
Suppose that $L$ is a finite relational language. \\
We will show that $\sat_{\infty}(A)$ is recursive.
\begin{proof}
	TODO
\end{proof}

\end{document}
